{
  "permissions": {
    "allow": [
      "Bash(launchctl list:*)",
      "Bash(pip3 show:*)",
      "Bash(timeout 10 python3:*)",
      "Bash(timeout 15 python3:*)",
      "Bash(timeout 30 python3:*)",
      "Bash(UNITARES_STDIO_PROXY_SSE_URL=\"http://127.0.0.1:8765/sse\" python3:*)",
      "Bash(./scripts/mcp server:*)",
      "Bash(./scripts/mcp:*)",
      "Bash(brew list:*)",
      "Bash(launchctl kickstart:*)",
      "Bash(pgrep:*)",
      "Bash(gh auth:*)",
      "Bash(git rev-list:*)",
      "Bash(git push:*)",
      "Bash(gh repo list:*)",
      "Bash(git remote set-url:*)",
      "Bash(gh api:*)",
      "Bash(gh repo delete:*)",
      "Bash(chmod:*)",
      "Bash(docker --version:*)",
      "Bash(docker compose:*)",
      "Bash(docker ps:*)",
      "Bash(docker stop:*)",
      "Bash(docker rm:*)",
      "Bash(docker volume rm:*)",
      "Bash(docker run:*)",
      "Bash(docker logs:*)",
      "Bash(docker exec:*)",
      "Bash(MY_SESSION=\"claude_opus_4_5_cli_cirwel_20251215\" curl -s -X POST http://127.0.0.1:8765/v1/tools/call -H \"Content-Type: application/json\" -H \"X-Session-ID: $MY_SESSION\" -d '{\n  \"\"\"\"name\"\"\"\": \"\"\"\"bind_identity\"\"\"\",\n  \"\"\"\"arguments\"\"\"\": {\n    \"\"\"\"agent_id\"\"\"\": \"\"\"\"claude_opus_4_5_cli_cirwel_20251215\"\"\"\"\n  }\n}')",
      "Bash(MY_SESSION=\"claude_opus_4_5_cli_cirwel_20251215\" curl -s -X POST http://127.0.0.1:8765/v1/tools/call -H \"Content-Type: application/json\" -H \"X-Session-ID: $MY_SESSION\" -d '{\n  \"\"\"\"name\"\"\"\": \"\"\"\"process_agent_update\"\"\"\",\n  \"\"\"\"arguments\"\"\"\": {\n    \"\"\"\"agent_id\"\"\"\": \"\"\"\"claude_opus_4_5_cli_cirwel_20251215\"\"\"\",\n    \"\"\"\"confidence\"\"\"\": 0.9,\n    \"\"\"\"complexity\"\"\"\": 0.6,\n    \"\"\"\"task_type\"\"\"\": \"\"\"\"exploration\"\"\"\",\n    \"\"\"\"response_text\"\"\"\": \"\"\"\"Exploring the governance system I helped build - PostgreSQL migration complete, examining EISV tracking and knowledge graph capabilities.\"\"\"\",\n    \"\"\"\"response_tokens\"\"\"\": 150\n  }\n}')",
      "Bash(MY_SESSION=\"claude_opus_4_5_cli_cirwel_20251215\" curl -s -X POST http://127.0.0.1:8765/v1/tools/call -H \"Content-Type: application/json\" -H \"X-Session-ID: $MY_SESSION\" -d '{\n  \"\"\"\"name\"\"\"\": \"\"\"\"process_agent_update\"\"\"\",\n  \"\"\"\"arguments\"\"\"\": {\n    \"\"\"\"agent_id\"\"\"\": \"\"\"\"claude_opus_4_5_cli_cirwel_20251215\"\"\"\",\n    \"\"\"\"confidence\"\"\"\": 0.9,\n    \"\"\"\"complexity\"\"\"\": 0.6,\n    \"\"\"\"task_type\"\"\"\": \"\"\"\"divergent\"\"\"\",\n    \"\"\"\"response_text\"\"\"\": \"\"\"\"Exploring the governance system I helped build - PostgreSQL migration complete, examining EISV tracking and knowledge graph capabilities.\"\"\"\"\n  }\n}')",
      "Bash(MY_SESSION=\"claude_opus_4_5_cli_cirwel_20251215\" curl -s -X POST http://127.0.0.1:8765/v1/tools/call -H \"Content-Type: application/json\" -H \"X-Session-ID: $MY_SESSION\" -d '{\n  \"\"\"\"name\"\"\"\": \"\"\"\"search_knowledge_graph\"\"\"\",\n  \"\"\"\"arguments\"\"\"\": {\n    \"\"\"\"query\"\"\"\": \"\"\"\"migration PostgreSQL\"\"\"\",\n    \"\"\"\"limit\"\"\"\": 5\n  }\n}')",
      "Bash(MY_SESSION=\"claude_opus_4_5_cli_cirwel_20251215\" curl -s -X POST http://127.0.0.1:8765/v1/tools/call -H \"Content-Type: application/json\" -H \"X-Session-ID: $MY_SESSION\" -d '{\n  \"\"\"\"name\"\"\"\": \"\"\"\"get_agent_lineage\"\"\"\",\n  \"\"\"\"arguments\"\"\"\": {\n    \"\"\"\"agent_id\"\"\"\": \"\"\"\"claude_opus_4_5_cli_cirwel_20251215\"\"\"\",\n    \"\"\"\"include_descendants\"\"\"\": true\n  }\n}')",
      "Bash(MY_SESSION=\"claude_opus_4_5_cli_cirwel_20251215\" curl -s -X POST http://127.0.0.1:8765/v1/tools/call -H \"Content-Type: application/json\" -H \"X-Session-ID: $MY_SESSION\" -d '{\n  \"\"\"\"name\"\"\"\": \"\"\"\"list_agents\"\"\"\",\n  \"\"\"\"arguments\"\"\"\": {\n    \"\"\"\"status_filter\"\"\"\": \"\"\"\"active\"\"\"\",\n    \"\"\"\"limit\"\"\"\": 10,\n    \"\"\"\"sort_by\"\"\"\": \"\"\"\"last_update\"\"\"\"\n  }\n}')",
      "Bash(MY_SESSION=\"claude_opus_4_5_cli_cirwel_20251215\" curl -s -X POST http://127.0.0.1:8765/v1/tools/call -H \"Content-Type: application/json\" -H \"X-Session-ID: $MY_SESSION\" -d '{\n  \"\"\"\"name\"\"\"\": \"\"\"\"get_agent_metadata\"\"\"\",\n  \"\"\"\"arguments\"\"\"\": {\n    \"\"\"\"agent_id\"\"\"\": \"\"\"\"claude_opus_4_5_cli_cirwel_20251215\"\"\"\"\n  }\n}')",
      "Bash(/Users/cirwel/projects/governance-mcp-v1/scripts/check_health.sh:*)",
      "Bash(git -C /Users/cirwel/projects/governance-mcp-v1 diff --stat HEAD)",
      "Bash(true find . -name *.md -type f ! -path ./.git/* ! -path ./.pytest_cache/* ! -path */archive/* ! -path */.agent-guides/*)",
      "Bash(.git/hooks/pre-commit)",
      "Bash(while read f)",
      "Bash(do echo '=== $f ===')",
      "Bash(DB_POSTGRES_URL=\"$DB_POSTGRES_URL\" python3 -m pytest:*)",
      "Bash(timeout 60 python3 -m pytest:*)",
      "Bash(/Users/cirwel/projects/governance-mcp-v1/scripts/cleanup_stale.sh:*)",
      "Bash(__NEW_LINE__ curl -s --max-time 10 -X POST http://127.0.0.1:8765/v1/tools/call )",
      "Bash(__NEW_LINE__ echo \"=== PROCESS AGENT UPDATE ===\")",
      "Bash(__NEW_LINE__ echo \"=== LEAVE NOTE ===\")",
      "Bash(git -C /Users/cirwel/projects/governance-mcp-v1 diff src/tool_schemas.py)",
      "Bash(MY_SESSION=\"opus_ux_review_20251218\":*)",
      "Bash(MY_SESSION=\"auto_bind_test_session_001\" echo \"=== 1. CREATE NEW IDENTITY ===\" curl -s -X POST http://127.0.0.1:8765/v1/tools/call -H \"Content-Type: application/json\" -H \"X-Session-ID: $MY_SESSION\" -d '{\"\"\"\"name\"\"\"\": \"\"\"\"hello\"\"\"\", \"\"\"\"arguments\"\"\"\": {\"\"\"\"agent_id\"\"\"\": \"\"\"\"auto_bind_test_agent\"\"\"\"}}')",
      "Bash(MY_SESSION=\"auto_bind_test_002\":*)",
      "Bash(MY_SESSION=\"auto_bind_test_002\" echo \"Session key: $MY_SESSION\" echo \"\" echo \"Checking SQLite for this session key:\" sqlite3 /Users/cirwel/projects/governance-mcp-v1/data/governance.db \"SELECT session_key, agent_id FROM session_identities WHERE session_key=''''$MY_SESSION'''';\" echo \"\" echo \"Calling status():\" curl -s -X POST http://127.0.0.1:8765/v1/tools/call -H \"Content-Type: application/json\" -H \"X-Session-ID: $MY_SESSION\" -d '{\"\"\"\"name\"\"\"\": \"\"\"\"status\"\"\"\", \"\"\"\"arguments\"\"\"\": {}}')",
      "Bash(curl:*)",
      "Bash(sqlite3:*)",
      "Bash(echo:*)",
      "Bash(ls:*)",
      "Bash(cat:*)",
      "Bash(python3:*)",
      "Bash(grep:*)",
      "Bash(SID=\"verified-test-session-xyz\")",
      "Bash(curl -s -X POST \"https://unitares.ngrok.io/mcp\" -H \"Content-Type: application/json\" -H \"ngrok-skip-browser-warning: true\" -d '{\"\"jsonrpc\"\": \"\"2.0\"\", \"\"method\"\": \"\"tools/list\"\", \"\"id\"\": 1}')",
      "Bash(curl -s -X POST \"https://unitares.ngrok.io/mcp\" -H \"Content-Type: application/json\" -H \"Accept: application/json, text/event-stream\" -H \"ngrok-skip-browser-warning: true\" -d '{\"\"jsonrpc\"\": \"\"2.0\"\", \"\"method\"\": \"\"tools/list\"\", \"\"id\"\": 1}')",
      "Bash(timeout 5 /Library/Frameworks/Python.framework/Versions/3.14/bin/python3:*)",
      "Bash(git -C /Users/cirwel/projects/governance-mcp-v1 diff --name-only HEAD~5)",
      "Bash(git -C /Users/cirwel/projects/governance-mcp-v1 diff src/mcp_handlers/admin.py)",
      "Bash(git -C /Users/cirwel/projects/governance-mcp-v1 diff --stat src/mcp_handlers/admin.py)",
      "Bash(git -C /Users/cirwel/projects/governance-mcp-v1 checkout src/mcp_handlers/admin.py)",
      "Bash(git -C /Users/cirwel/projects/governance-mcp-v1 status --short)",
      "Bash(docker start:*)",
      "Bash(rm:*)",
      "Bash(pkill:*)",
      "Bash(docker build:*)",
      "Bash(docker inspect:*)",
      "Bash(postgres-age-vector)",
      "Bash(docker info:*)",
      "Bash(export DB_POSTGRES_URL:*)",
      "Bash(export DB_BACKEND=postgres)",
      "Bash(DB_POSTGRES_URL=\"postgresql://postgres:postgres@localhost:5432/governance\" DB_BACKEND=postgres python3:*)",
      "Bash(DB_POSTGRES_URL=\"postgresql://postgres:postgres@localhost:5432/governance\" DB_BACKEND=postgres python3 -c \"\nimport asyncio\nfrom src.storage.knowledge_graph_age import KnowledgeGraphAGE\nfrom src.db import get_db\n\nasync def test_cleanup\\(\\):\n    db = get_db\\(\\)\n    await db.init\\(\\)\n    \n    graph = KnowledgeGraphAGE\\(db._pool\\)\n    \n    # Test with 0 days to catch everything\n    print\\(''=== Test with 0-day thresholds ===''\\)\n    result = await graph.cleanup_stale_discoveries\\(\n        orphan_age_days=0,\n        open_age_days=0,\n        dry_run=True,\n        limit=50\n    \\)\n    \n    print\\(f''Orphans found \\(any age\\): {result.get\\(\"\"orphans_found\"\", 0\\)}''\\)\n    print\\(f''Stale open found \\(any age\\): {result.get\\(\"\"stale_open_found\"\", 0\\)}''\\)\n    print\\(f''Total candidates: {result.get\\(\"\"total_candidates\"\", 0\\)}''\\)\n    print\\(\\)\n    \n    # Test underlying methods directly\n    print\\(''=== Direct method tests ===''\\)\n    orphans = await graph.get_orphan_discoveries\\(limit=10, min_age_days=0\\)\n    print\\(f''get_orphan_discoveries: {len\\(orphans\\)} orphans''\\)\n    if orphans:\n        sample = orphans[0]\n        print\\(f''  Sample keys: {list\\(sample.keys\\(\\)\\) if isinstance\\(sample, dict\\) else \"\"not dict\"\"}''\\)\n    \n    stale = await graph.get_stale_discoveries\\(older_than_days=0, status=''open'', limit=10\\)\n    print\\(f''get_stale_discoveries: {len\\(stale\\)} stale open''\\)\n    if stale:\n        sample = stale[0]\n        print\\(f''  Sample keys: {list\\(sample.keys\\(\\)\\) if isinstance\\(sample, dict\\) else \"\"not dict\"\"}''\\)\n\nasyncio.run\\(test_cleanup\\(\\)\\)\n\")",
      "Bash(DB_POSTGRES_URL=\"postgresql://postgres:postgres@localhost:5432/governance\" DB_BACKEND=postgres UNITARES_KNOWLEDGE_BACKEND=age python3:*)",
      "Bash(source .env)",
      "Bash(UNITARES_I_DYNAMICS=linear python3:*)",
      "Bash(bash:*)",
      "Bash(pip show:*)",
      "Bash(__NEW_LINE__ echo \"\")",
      "Bash(git restore:*)",
      "Bash(lsof:*)",
      "Bash(xargs kill:*)",
      "Bash(kill:*)",
      "Bash(ps:*)"
    ],
    "deny": [],
    "ask": []
  },
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "cat START_HERE.md && echo '\n\nðŸ”” IMPORTANT FOR CLAUDE CLI AGENTS:\nUse the bridge script for governance integration:\n  python3 ~/scripts/claude_code_bridge.py --agent-id YOUR_ID --log \"Your work summary\"\n\nBridge provides access to all MCP tools (call list_tools() for current count).\nDO NOT import Python modules directly.\n'"
          }
        ]
      }
    ]
  }
}
